package com.example.testir;

import android.content.Context;
import android.hardware.ConsumerIrManager;
import android.os.Bundle;
import android.os.Vibrator;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;

import androidx.annotation.NonNull;
import androidx.fragment.app.Fragment;
import androidx.navigation.fragment.NavHostFragment;

import com.example.testir.databinding.FragmentFirstBinding;

public class FirstFragment extends Fragment  implements View.OnClickListener {

    private FragmentFirstBinding binding;

    @Override
    public View onCreateView(
            LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState
    ) {


        binding = FragmentFirstBinding.inflate(inflater, container, false);
        binding.buttonPower.setOnClickListener(this);
        binding.buttonTop.setOnClickListener(this);
        binding.buttonDown.setOnClickListener(this);
        binding.buttonRight.setOnClickListener(this);
        binding.buttonLeft.setOnClickListener(this);
        binding.buttonOk.setOnClickListener(this);
        binding.buttonHome.setOnClickListener(this);
        binding.buttonBack.setOnClickListener(this);
        return binding.getRoot();

    }
    int[] patternOFF = {204, 49272, 208, 444, 360, 508, 360, 512, 360, 508, 360, 508, 360, 512, 360, 25288, 3400, 1816, 360, 1376, 360, 512, 360, 508, 360, 512, 356, 1380, 360, 512, 356, 512, 360, 508, 360, 512, 360, 1380, 356, 512, 360, 1376, 360, 1380, 360, 512, 356, 1380, 360, 1380, 360, 1380, 360, 1380, 356, 1380, 360, 512, 356, 512, 360, 1352, 384, 512, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 364, 504, 360, 512, 356, 512, 360, 508, 360, 508, 364, 508, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 360, 508, 360, 508, 364, 508, 360, 508, 360, 508, 360, 1380, 360, 1380, 360, 508, 360, 512, 360, 508, 360, 1380, 360, 1376, 360, 512, 356, 1384, 356, 1384, 356, 512, 360, 508, 360, 508, 360, 512, 360, 508, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 360, 1380, 360, 1376, 360, 1380, 360, 1380, 360, 508, 360, 1356, 388, 504, 360, 1380, 360, 508, 360, 508, 360, 512, 360, 508, 360, 512, 360, 508, 360, 512, 356, 512, 360, 508, 360, 508, 360, 512, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 360, 508, 360, 508, 360, 512, 360, 508, 360, 512, 360, 508, 360, 508, 360, 512, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 356, 512, 412, 456, 360, 508, 360, 512, 412, 456, 360, 512, 360, 508, 360, 512, 356, 512, 360, 508, 360, 508, 360, 512, 360, 508, 360, 1380, 364, 504, 360, 1380, 360, 508, 360, 512, 360, 508, 360, 1380, 360, 1380, 356, 512, 360, 508, 360, 512, 360, 508, 360, 508, 360, 512, 360, 1376, 360, 512, 360, 508, 360, 512, 356, 512, 360, 1380, 360, 508, 360, 508, 360, 512, 356, 512, 360, 508, 360, 512, 360, 1380, 356, 512, 360, 1380, 356, 1380, 360, 508, 360, 512, 360, 49944, 84};


    int[] patternON = {460, 404, 464, 404, 464, 408, 464, 404, 464, 368, 500, 25188, 3500, 1720, 456, 1280, 456, 412, 456, 412, 464, 404, 436, 1308, 432, 424, 468, 412, 460, 412, 432, 440, 456, 1284, 452, 412, 456, 1284, 456, 1284, 456, 412, 432, 1308, 432, 1308, 456, 1280, 460, 1280, 456, 1284, 456, 408, 460, 412, 460, 1284, 452, 412, 460, 408, 464, 408, 456, 412, 460, 412, 456, 412, 460, 412, 456, 408, 460, 412, 460, 408, 460, 412, 460, 408, 460, 408, 460, 412, 460, 408, 460, 412, 456, 412, 484, 368, 472, 1288, 456, 408, 460, 412, 460, 412, 452, 1284, 460, 1280, 456, 416, 456, 408, 460, 408, 460, 412, 456, 1288, 452, 412, 456, 1284, 456, 1284, 456, 416, 452, 416, 456, 412, 456, 412, 456, 416, 456, 408, 460, 416, 452, 416, 452, 416, 456, 412, 456, 1284, 456, 1284, 456, 1284, 456, 1284, 452, 416, 456, 1284, 452, 416, 456, 1284, 452, 416, 456, 412, 456, 416, 452, 416, 452, 420, 452, 416, 452, 416, 452, 420, 452, 416, 452, 420, 448, 420, 452, 416, 452, 420, 452, 416, 452, 416, 452, 420, 452, 416, 452, 416, 452, 420, 452, 416, 452, 440, 428, 420, 448, 424, 448, 420, 452, 440, 424, 420, 452, 420, 448, 444, 424, 424, 448, 444, 424, 444, 424, 444, 428, 444, 424, 444, 428, 440, 428, 444, 424, 444, 424, 448, 424, 444, 424, 444, 424, 448, 420, 448, 424, 448, 420, 448, 420, 448, 420, 452, 420, 448, 420, 452, 416, 1320, 420, 452, 416, 1324, 416, 452, 416, 452, 416, 452, 420, 1320, 420, 1320, 416, 452, 420, 452, 416, 452, 416, 452, 420, 452, 416, 452, 416, 452, 420, 452, 416, 452, 420, 452, 416, 452, 416, 1324, 416, 452, 416, 452, 420, 452, 392, 476, 416, 1324, 416, 1320, 420, 452, 416, 452, 420, 1320, 416, 1324, 416, 1320, 420, 1320, 416};

    int[] test = {5138, 2004,  422, 1678,  422, 584,  424, 584,  422, 586,  422, 1676,  422, 584,  424, 584,  422, 584,  424, 586,  422, 1676,  424, 584,  422, 1676,  424, 1676,  424, 584,  422, 1676,  422, 1676,  424, 1676,  422, 1676,  422, 1676,  422, 586,  422, 586,  422, 1678,  422, 584,  422, 584,  422, 584,  422, 584,  424, 584,  424, 584,  422, 1676,  422, 1678,  420, 1678,  420, 1676,  422, 1678,  422, 588,  420, 1678,  420, 1678,  420, 586,  422, 588,  418, 590,  418, 588,  420, 588,  394, 614,  394, 612,  396, 612,  396, 612,  392, 614,  394, 616,  394, 612,  394, 1704,  390, 1708,  390, 1708,  390, 1710,  388, 618,  390, 618,  390, 618,  390, 616,  390, 28244,  5104, 2036,  390, 1708,  390, 618,  390, 618,  392, 616,  392, 1708,  392, 616,  392, 616,  392, 616,  392, 616,  392, 1708,  390, 618,  392, 1706,  390, 1708,  390, 618,  392, 1706,  392, 1706,  392, 1708,  392, 1706,  392, 1708,  392, 616,  392, 616,  392, 1706,  392, 616,  394, 614,  392, 614,  392, 616,  390, 616,  392, 614,  394, 612,  392, 616,  392, 616,  390, 616,  392, 1708,  390, 1710,  390, 618,  392, 616,  390, 1710,  390, 616,  392, 1708,  390, 1708,  390, 1708,  390, 616,  392, 616,  390, 618,  390, 1708,  390, 1710,  388, 618,  390, 618,  390, 1710,  388, 620,  388, 618,  388, 620,  388, 1712,  388, 1712,  386, 1712,  362, 1738,  362, 644,  364, 644,  364, 644,  362, 644,  362, 644,  364, 644,  362, 644,  362, 646,  362, 646,  362, 646,  362, 646,  364, 644,  360, 646,  362, 646,  362, 646,  360, 646,  360, 646,  360, 1738,  386, 622,  360, 646,  360, 648,  360, 1738,  384, 624,  360, 646,  384, 622,  360, 1738,  384, 624,  384, 1714,  384, 626,  382, 624,  384, 622,  384, 624,  384, 624,  384, 624,  382, 624,  382, 626,  384, 624,  382, 626,  382, 624,  382, 626,  384, 1716,  382, 1716,  382, 624,  384, 622,  384, 1714,  386, 1714,  384, 622,  384, 624,  384};


    int[] patternPOWERFUL = {524, 372, 468, 400, 468, 400, 440, 432, 440, 428, 440, 25180, 3572, 1648, 528, 1236, 500, 368, 504, 364, 504, 368, 500, 1240, 500, 368, 504, 364, 504, 364, 504, 368, 504, 1232, 504, 368, 500, 1240, 500, 1236, 504, 368, 500, 1240, 500, 1236, 504, 1236, 500, 1240, 500, 1236, 504, 364, 508, 364, 504, 1208, 528, 368, 504, 364, 504, 368, 500, 368, 496, 372, 468, 404, 412, 456, 412, 456, 432, 440, 456, 412, 488, 380, 496, 376, 464, 404, 436, 432, 464, 404, 464, 360, 508, 356, 512, 304, 564, 1280, 464, 380, 484, 384, 484, 384, 488, 1276, 464, 1272, 464, 384, 484, 388, 480, 388, 484, 384, 484, 1276, 464, 388, 480, 388, 484, 1276, 464, 384, 484, 384, 484, 388, 480, 388, 484, 384, 484, 388, 488, 380, 484, 384, 488, 360, 508, 360, 508, 1276, 464, 1276, 460, 1276, 464, 1276, 464, 356, 516, 1272, 464, 360, 512, 1272, 464, 364, 508, 356, 512, 356, 516, 352, 516, 356, 512, 356, 516, 356, 512, 356, 516, 348, 520, 356, 516, 356, 512, 360, 512, 296, 572, 360, 508, 312, 556, 408, 460, 408, 460, 412, 436, 432, 440, 432, 436, 432, 440, 432, 492, 376, 520, 348, 528, 344, 524, 344, 524, 348, 516, 352, 484, 384, 484, 384, 456, 416, 428, 440, 412, 1328, 412, 456, 412, 460, 412, 456, 436, 432, 440, 432, 464, 404, 464, 404, 468, 404, 464, 404, 468, 400, 468, 404, 464, 404, 464, 380, 488, 384, 484, 384, 484, 1252, 484, 388, 456, 1280, 460, 412, 456, 412, 456, 412, 460, 1284, 452, 1284, 456, 412, 456, 412, 456, 416, 452, 416, 456, 416, 452, 416, 452, 416, 456, 416, 452, 416, 456, 416, 452, 416, 452, 1308, 428, 444, 428, 440, 428, 444, 424, 444, 428, 440, 428, 444, 424, 1316, 424, 444, 424, 444, 424, 1316, 424, 1316, 420, 1320, 416};


    int[] TVPower  = {8996, 4552,  656, 498,  656, 500,  656, 500,  658, 500,  656, 1658,  656, 500,  656, 1658,  656, 500,  652, 1662,  656, 1658,  656, 1658,  632, 1680,  634, 524,  632, 1682,  632, 524,  634, 1680,  634, 524,  632, 1680,  632, 524,  632, 524,  634, 1680,  632, 524,  632, 524,  634, 524,  632, 1682,  632, 524,  632, 1680,  634, 1680,  632, 524,  632, 1682,  632, 1682,  632, 1682,  632, 40214,  9052, 2230,  636};
    int[] TVRight = {8960, 4588,  620, 536,  618, 538,  618, 538,  618, 538,  616, 1700,  616, 540,  616, 1698,  616, 540,  616, 1698,  616, 1698,  616, 1696,  616, 1698,  618, 540,  616, 1698,  618, 538,  616, 1700,  614, 1698,  614, 542,  616, 1698,  616, 1698,  616, 1698,  616, 1700,  614, 542,  612, 544,  616, 540,  616, 1700,  618, 538,  614, 542,  614, 542,  618, 540,  614, 1700,  616, 1700,  614, 40244,  8986, 2300,  592};
    int[] TVLeft = {8920, 4626,  580, 574,  582, 574,  582, 574,  582, 574,  582, 1734,  580, 574,  582, 1732,  582, 574,  582, 1732,  582, 1734,  578, 1734,  580, 1734,  580, 574,  582, 1734,  580, 574,  582, 1734,  580, 1734,  580, 574,  582, 1732,  582, 1732,  582, 574,  582, 1732,  580, 576,  582, 574,  582, 574,  582, 1732,  582, 574,  582, 574,  582, 1730,  582, 576,  582, 1734,  580, 1732,  582, 40254,  8954, 2332,  562};
    int[] TVTop = {8948, 4598,  610, 546,  610, 546,  610, 546,  612, 544,  612, 1702,  614, 544,  612, 1702,  612, 544,  614, 1702,  614, 1700,  612, 1702,  614, 1702,  614, 542,  612, 1702,  612, 542,  612, 1702,  612, 544,  614, 1700,  612, 544,  614, 1698,  614, 1700,  612, 544,  614, 542,  612, 544,  612, 1702,  610, 546,  612, 1702,  610, 546,  612, 544,  610, 1704,  610, 1704,  612, 1704,  608, 40234,  8978, 2330,  560};
    int[] TVDown = {8968, 4580,  628, 526,  630, 528,  628, 528,  630, 528,  628, 1686,  630, 526,  628, 1686,  628, 528,  628, 1688,  626, 1686,  624, 1690,  624, 1688,  624, 530,  628, 1686,  626, 532,  624, 1690,  624, 1688,  628, 1688,  624, 532,  628, 1686,  626, 1688,  628, 528,  628, 530,  628, 528,  628, 528,  628, 530,  626, 1686,  628, 528,  628, 530,  626, 1688,  626, 1686,  626, 1688,  628, 40216,  9016, 2268,  624};
    int[] TVOK = {8992, 4556,  652, 504,  652, 504,  654, 502,  652, 504,  654, 1662,  652, 504,  652, 1660,  654, 504,  654, 1660,  654, 1660,  654, 1662,  652, 1660,  654, 504,  652, 1662,  652, 504,  652, 1660,  654, 504,  652, 1662,  654, 1660,  652, 1662,  652, 504,  652, 504,  654, 502,  654, 504,  652, 1662,  652, 504,  652, 504,  654, 502,  654, 1660,  652, 1662,  652, 1660,  654, 1660,  654, 40192,  9042, 2242,  652};
    int[] TVBack = {8998, 4548,  658, 498,  658, 498,  658, 498,  658, 500,  656, 1656,  658, 498,  658, 1656,  658, 498,  658, 1656,  658, 1656,  658, 1656,  656, 1656,  658, 500,  656, 1658,  656, 500,  656, 1658,  656, 1658,  656, 1658,  656, 1658,  656, 1656,  656, 1658,  656, 1658,  656, 500,  656, 500,  658, 500,  654, 502,  656, 500,  656, 502,  656, 500,  656, 500,  656, 1658,  656, 1658,  654, 40182,  8978, 2306,  586};
    int[] TVHome = {8934, 4616,  592, 564,  592, 564,  594, 564,  594, 562,  594, 1722,  594, 562,  592, 1722,  594, 562,  594, 1720,  594, 1720,  594, 1718,  596, 1720,  594, 562,  618, 1696,  620, 536,  622, 1692,  620, 536,  622, 534,  624, 1690,  624, 532,  624, 1690,  624, 1690,  626, 530,  628, 530,  628, 1684,  628, 1686,  630, 526,  630, 1684,  630, 526,  630, 526,  630, 1684,  630, 1684,  632, 40214,  9024, 2258,  634};


    int carrierFrequency = 38000; //38kHz remote frequency
    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
//        Context context = requireContext().getApplicationContext();
//        Vibrator v = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
//        ConsumerIrManager ir_service = (ConsumerIrManager) context.getSystemService(Context.CONSUMER_IR_SERVICE);


//        binding.buttonPower.setOnClickListener(new View.OnClickListener() {
//            @Override
//            public void onClick(View view) {
//                v.vibrate(500);
//                ir_service.transmit(carrierFrequency , test);
//                NavHostFragment.findNavController(FirstFragment.this)
//                        .navigate(R.id.action_FirstFragment_to_SecondFragment);
//            }
//        });
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        binding = null;
    }
    @Override
    public void onClick(View v) {
        Context context = requireContext().getApplicationContext();
        Vibrator vib = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
        ConsumerIrManager ir_service = (ConsumerIrManager) context.getSystemService(Context.CONSUMER_IR_SERVICE);
        int[] rawData ={};
        switch ((String)v.getTag()) {
            case "down":
                rawData =TVDown;
                break;
            case "top":
                rawData =TVTop;
                break;
            case "power":
                rawData =TVPower;
                break;
            case "left":
                rawData =TVLeft;
                break;
            case "right":
                rawData =TVRight;
                break;
            case "back":
                rawData =TVBack;
                break;
            case "home":
                rawData =TVHome;
                break;
            case "ok":
                rawData =TVOK;
                break;
            default:
                break;
        }
        if (rawData==null) {
            return;
        }
        vib.vibrate(500);
        ir_service.transmit(carrierFrequency , rawData);
//        NavHostFragment.findNavController(FirstFragment.this)
//                .navigate(R.id.action_FirstFragment_to_SecondFragment);
    }

}